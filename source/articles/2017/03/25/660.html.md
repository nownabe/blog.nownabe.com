---
title: "誰でもBrainf*ckっぽい言語が作れる？ツール作った"
category: Diary
tags: golang
created_at: 2017-03-25 13:46:53 +0900
updated_at: 2017-08-04 18:47:10 +0900
published: true
number: 660
---

# はじめに
なぜかbrainf*ckを実装した。
ついでに誰でもオリジナルなbrainf*ckっぽいプログラムを実行できるようにしてみた :bulb: 

https://github.com/nownabe/brainfuck-go

# 使い方
まずはインストール。

```bash
go get -u github.com/nownabe/brainfuck-go
```

例えばfizzbuzzを実行してみる。ソースコードはこんな感じ。

```bash
$ cat fizzbuzz.bf
++++++[->++++> >+>+>-<<<<<]>[<++++> >+++>++++> >+++>+
++++>+++++> > > > > >++> >++<<<<<<<<<<<<<<-]<++++>+++
>-->+++>-> >--->++> > >+++++[->++>++<<]<<<<<<<<<<[->-
[> > > > > > >]>[<+++>.>.> > > >..> > >+<]<<<<<-[> > > >]>[<+
++++>.>.>..> > >+<]> > > >+<-[<<<]<[[-<<+> >]> > >+>+<<<<<
<[-> >+>+>-<<<<]<]>>[[-]<]>[> > >[>.<<.<<<]<[.<<<<]>]>.<<<<
<<<<<<<]
```

実行する。

```
$ brainfuck-go fizzbuzz.bf
Input: ++++++[->++++> >+>+>-<<<<<]>[<++++> >+++>++++> >+++>+
++++>+++++> > > > > >++> >++<<<<<<<<<<<<<<-]<++++>+++
>-->+++>-> >--->++> > >+++++[->++>++<<]<<<<<<<<<<[->-
[> > > > > > >]>[<+++>.>.> > > >..> > >+<]<<<<<-[> > > >]>[<+
++++>.>.>..> > >+<]> > > >+<-[<<<]<[[-<<+> >]> > >+>+<<<<<
<[-> >+>+>-<<<<]<]>>[[-]<]>[> > >[>.<<.<<<]<[.<<<<]>]>.<<<<
<<<<<<<]


1
2
Fizz
4
# 省略
97
98
Fizz
Buzz


(END)
```

# Brainf*ck風言語を作ってみる
この`brainfuck-go`というbrainf*ck処理系はJSONで命令をカスタマイズできるようになっている。

例えば、こんな感じのJSONを作ってみる。

```json:sushi.json
{
  "next": "ウニ",
  "prev": "イクラ",
  "inc": "マグロ",
  "dec": "アジ",
  "read": "タコ",
  "write": "トビウオ",
  "open": "[",
  "close": "]",
  "whitespaces": " \t\r\n"
}
```

このJSONだと、例えば`ウニ`はポインタをインクリメントする命令、`アジ`はポインタが指す値をデクリメントする命令となる。[^1]

[^1]: それぞれの命令の詳細はこちら: https://ja.wikipedia.org/wiki/Brainfuck

このJSONでできるプログラミング言語SUSHIで書かれたプログラムを実行するためには`-conf`オプションを使用する。

こんな感じで、SUSHIで書かれたfizzbuzzを実行できる。

```bash
$ brainfuck-go -conf sushi.json fizzbuzz.sushi
Input: マグロマグロマグロマグロマグロマグロ[アジウニマグロマグロマグロマグロウニ ウニマグロウニマグロウニアジイクライクライクライクライクラ]ウニ[イクラマグロマグロマグロマグロウニ ウニマグロマグロマグロウニマグロマグロマグロマグロウニ ウニマグロマグロマグロウニマグロ
マグロマグロマグロマグロウニマグロマグロマグロマグロマグロウニ ウニ ウニ ウニ ウニ ウニマグロマグロウニ ウニマグロマグロイクライクライクライクライクライクライクライクライクライクライクライクライクライクラアジ]イクラマグロマグロマグロマグロウニマグロマグロマグロ
ウニアジアジウニマグロマグロマグロウニアジウニ ウニアジアジアジウニマグロマグロウニ ウニ ウニマグロマグロマグロマグロマグロ[アジウニマグロマグロウニマグロマグロイクライクラ]イクライクライクライクライクライクライクライクライクライクラ[アジウニアジ
[ウニ ウニ ウニ ウニ ウニ ウニ ウニ]ウニ[イクラマグロマグロマグロウニトビウオウニトビウオウニ ウニ ウニ ウニトビウオトビウオウニ ウニ ウニマグロイクラ]イクライクライクライクライクラアジ[ウニ ウニ ウニ ウニ]ウニ[イクラマグロ
マグロマグロマグロマグロウニトビウオウニトビウオウニトビウオトビウオウニ ウニ ウニマグロイクラ]ウニ ウニ ウニ ウニマグロイクラアジ[イクライクライクラ]イクラ[[アジイクライクラマグロウニ ウニ]ウニ ウニ ウニマグロウニマグロイクライクライクライクライクラ
イクラ[アジウニ ウニマグロウニマグロウニアジイクライクライクライクラ]イクラ]ウニウニ[[アジ]イクラ]ウニ[ウニ ウニ ウニ[ウニトビウオイクライクラトビウオイクライクライクラ]イクラ[トビウオイクライクライクライクラ]ウニ]ウニトビウオイクライクライクライクラ
イクライクライクライクライクライクライクラ]



1
2
Fizz
4
# 省略
97
98
Fizz
Buzz


(END)
```

# ソースコード変換
brainf*ckのソースコードを新しいオリジナル言語のソースコードに変換できるような変換器も作った。

インストール

```bash
go get -u github.com/nownabe/brainfuck-go/converter
```

変換

```bash
$ converter -conf sushi.json fizzbuzz.bf
マグロマグロマグロマグロマグロマグロ[アジウニマグロマグロマグロマグロウニ ウニマグロウニマグロウニアジイクライクライクライクライクラ]ウニ[イクラマグロマグロマグロマグロウニ ウニマグロマグロマグロウニマグロマグロマグロマグロウニ ウニマグロマグロマグロウニマグロ
マグロマグロマグロマグロウニマグロマグロマグロマグロマグロウニ ウニ ウニ ウニ ウニ ウニマグロマグロウニ ウニマグロマグロイクライクライクライクライクライクライクライクライクライクライクライクライクライクラアジ]イクラマグロマグロマグロマグロウニマグロマグロマグロ
ウニアジアジウニマグロマグロマグロウニアジウニ ウニアジアジアジウニマグロマグロウニ ウニ ウニマグロマグロマグロマグロマグロ[アジウニマグロマグロウニマグロマグロイクライクラ]イクライクライクライクライクライクライクライクライクライクラ[アジウニアジ
[ウニ ウニ ウニ ウニ ウニ ウニ ウニ]ウニ[イクラマグロマグロマグロウニトビウオウニトビウオウニ ウニ ウニ ウニトビウオトビウオウニ ウニ ウニマグロイクラ]イクライクライクライクライクラアジ[ウニ ウニ ウニ ウニ]ウニ[イクラマグロ
マグロマグロマグロマグロウニトビウオウニトビウオウニトビウオトビウオウニ ウニ ウニマグロイクラ]ウニ ウニ ウニ ウニマグロイクラアジ[イクライクライクラ]イクラ[[アジイクライクラマグロウニ ウニ]ウニ ウニ ウニマグロウニマグロイクライクライクライクライクラ
イクラ[アジウニ ウニマグロウニマグロウニアジイクライクライクライクラ]イクラ]ウニウニ[[アジ]イクラ]ウニ[ウニ ウニ ウニ[ウニトビウオイクライクラトビウオイクライクライクラ]イクラ[トビウオイクライクライクライクラ]ウニ]ウニトビウオイクライクライクライクラ
イクライクライクライクライクライクライクラ]
```

# おわりに
ぜひ遊んでみてください :star2: 

次はもっと高級な言語を作ってみたい。
