<!DOCTYPE html>
<html lang="ja"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><title>GCP updates  | November 12, 2018 - nownab.log</title><link rel="alternate" type="application/rss+xml" href="https://blog.nownabe.com/feed.xml" title="nownab.log">

  <link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico">

  <link rel="stylesheet" href="/css/ress.min.css">
  <link rel="stylesheet" href="/css/chroma.css"><link rel="stylesheet" href="/css/main.807580d2e8ed954d7d72bb323ad69f8a694d93c7af99ef4f1dbd82572ddebf4937b339f9e6a6fb743480b4d80285fcc9dd414eb49ea21195bb1ae0782fc1ba81.css" integrity="sha512-gHWA0ujtlU19crsyOtafimlNk8evme9PHb2CVy3ev0k3szn55qb7dDSAtNgChfzJ3UFOtJ6iEZW7GuB4L8G6gQ==">

  <meta name="author" content="nownabe">
  <meta name="description" content="the nownabe&#39;s life log">

  <meta property="og:site_name" content="nownab.log">
  <meta property="og:type" content="article">

  <meta property="twitter:card" content="summary">
  <meta property="twitter:site" content="@nownabe">
  <meta property="twitter:creator" content="@nownabe">

  <meta property="fb:app_id" content="1775541316016693"><meta property="og:url" content="https://blog.nownabe.com/2018/11/28/1442.html/">
  <meta property="og:title" content="GCP updates  | November 12, 2018 - nownab.log">
  <meta property="og:description" content="COMPUTE Compute Engine – logging serial port output to Stackdriver: beta This feature enables you to configure your VM instances to automatically log serial port output to Stackdriver, allowing it to persist beyond the lifetime of the VMs. Logging this data to Stackdriver makes it easier for you to analyze and troubleshoot VMs that have crashed or terminated. Documentation おもしろいなw IaaS"><meta property="og:image" content="https://blog.nownabe.com/img/nownabe.png"><meta property="twitter:title" content="GCP updates  | November 12, 2018 - nownab.log">
  <meta property="twitter:description" content="COMPUTE Compute Engine – logging serial port output to Stackdriver: beta This feature enables you to configure your VM instances to automatically log serial port output to Stackdriver, allowing it to persist beyond the lifetime of the VMs. Logging this data to Stackdriver makes it easier for you to analyze and troubleshoot VMs that have crashed or terminated. Documentation おもしろいなw IaaS">
  <meta property="twitter:image" content="https://blog.nownabe.com/">
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-37580164-4', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>
<body>
  <div id="site-container"><div id="header-container">
  <header class="container">
    <h1>
      <a href="/">
        nownab.log
      </a>
    </h1>
  </header>
</div>
<div id="content-container">
      <div class="container" role="main">
<article>
  <div class="title">
    <h2><a href="https://blog.nownabe.com/2018/11/28/1442.html/">GCP updates  | November 12, 2018</a></h2>
    <span class="date">Posted on Nov 28, 2018</span>
  </div>
  <div class="body">
    

<h1 id="compute">COMPUTE</h1>

<h2 id="compute-engine-logging-serial-port-output-to-stackdriver-beta">Compute Engine – logging serial port output to Stackdriver: beta</h2>

<blockquote>
<p>This feature enables you to configure your VM instances to automatically log serial port output to Stackdriver, allowing it to persist beyond the lifetime of the VMs. Logging this data to Stackdriver makes it easier for you to analyze and troubleshoot VMs that have crashed or terminated. <a href="https://cloud.google.com/compute/docs/instances/viewing-serial-port-output">Documentation</a></p>
</blockquote>

<p>おもしろいなw
IaaSレイヤーで凝ったことしてたら必要になってくるんですね。</p>

<h2 id="compute-engine-mounting-persistent-disks-into-containers-beta">Compute Engine – mounting persistent disks into containers: beta</h2>

<blockquote>
<p>With Container-Optimized OS 69 or newer, you can now mount persistent disks from a host VM into a container automatically, no coding required. This is similar to using the gcePersistentDisk volume type in Kubernetes. <a href="https://cloud.google.com/compute/docs/containers/configuring-options-to-run-containers#mounting_a_persistent_disk_as_a_data_volume">Documentation</a></p>
</blockquote>

<p>GCEのコンテナを起動できる機能に関して、APIとかコンソール一発でコンテナからPersistent Diskをマウントできるようになったって感じかな。
コンテナなのにGCEを使うってときはステートフルなあれが多いと思うので、あると嬉しいのかもしれませんね。</p>

<h1 id="data-analytics">DATA ANALYTICS</h1>

<h2 id="bigquery-sandbox-available-through-firebase-beta">BigQuery sandbox available through Firebase: beta</h2>

<blockquote>
<p>Firebase users on the free Spark plan can now export their project data to a BigQuery sandbox for analysis. You can export to BigQuery without a billable account to access up to 10 GB of active storage and 1 TB of processed query data per month. <a href="https://cloud.google.com/bigquery/docs/sandbox">Documentation</a></p>
</blockquote>

<p>課金してなくてもFirebase -&gt; BigQueryを試せるようになったってことかな。</p>

<h1 id="networking">NETWORKING</h1>

<h2 id="content-based-https-health-checks-ga">Content-based HTTPS health checks: GA</h2>

<blockquote>
<p>Health-checking mechanisms determine whether VM instances are responding properly to traffic. You can now specify the content that should be seen in the response string of an HTTPS health check for Google Cloud Platform load balancers. <a href="https://cloud.google.com/load-balancing/docs/health-check-concepts#content-based_health_checks">Documentation</a></p>
</blockquote>

<p>ふむ。</p>

<h2 id="cloud-dns-private-dns-zones-beta">Cloud DNS – private DNS zones: beta</h2>

<blockquote>
<p>Private DNS zones provide a simple-to-manage internal DNS solution for your private networks on GCP. This GCP-native and managed private zone capability removes the need to provision and manage additional software and compute resources. <a href="https://cloud.google.com/blog/products/networking/introducing-private-dns-zones-resolve-to-keep-internal-networks-concealed">Blog</a></p>
</blockquote>

<h2 id="private-google-access-from-on-premises-beta">Private Google Access from on-premises: beta</h2>

<blockquote>
<p>This feature enables your on-premises hosts to reach Google APIs and services through a Cloud VPN tunnel or Cloud Interconnect connection. <a href="https://cloud.google.com/vpc/docs/configure-private-google-access-hybrid">Documentation</a></p>
</blockquote>

<p>今までできなかったんですね。
こーゆーオンプレまわりの機能強化って日本企業の要望が強かったりするんだろうか。</p>

<h1 id="storage">STORAGE</h1>

<h2 id="cloud-firestore-emulator-beta">Cloud Firestore emulator: beta</h2>

<blockquote>
<p>By running a binary of Cloud Firestore within a local environment, you can safely test how code will interact with your apps and check the behavior of your Cloud Firestore Security Rules. <a href="https://cloud.google.com/firestore/docs/security/test-rules-emulator">Documentation</a></p>
</blockquote>

<p>いいですね。Firestoreへの移行が着々と進んでますね。</p>

<h1 id="identity-security">IDENTITY &amp; SECURITY</h1>

<h2 id="compute-engine-new-cloud-identity-and-access-management-features-beta">Compute Engine – new Cloud Identity and Access Management features: beta</h2>

<blockquote>
<p>A new resource-level IAM feature allows you to control access by setting policies on individual resources, such as VM instances or disks. And with the new IAM conditions feature you can also grant access based on predefined conditions, such as resource name prefix or time frame. <a href="https://cloud.google.com/blog/products/identity-security/get-more-control-over-your-compute-engine-resources-with-new-cloud-iam-features">Blog</a></p>
</blockquote>

<p>より細かくIAMで権限をコントロールできるようになるみたいですね。
ブログの例だとリソースタイプとリソースの名前の前方一致という条件でポリシーを設定しています。</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
   <span class="nt">&#34;policy&#34;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&#34;bindings&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;roles/compute.instanceAdmin.v1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;members&#34;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&#34;user:dev1@example.com&#34;</span><span class="p">,</span>
         <span class="p">]</span>
        <span class="s2">&#34;condition&#34;</span><span class="p">:</span> <span class="p">{</span> 
          <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;dev1 prefix&#34;</span><span class="p">,</span>
          <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Role granted only for instances and disks with Name Prefix dev1&#34;</span><span class="p">,</span>
          <span class="nt">&#34;expression&#34;</span><span class="p">:</span> 
            <span class="s2">&#34;(resource.type==&#34;</span><span class="err">compute.instances</span><span class="s2">&#34;&amp;&amp; resource.name.startsWith(&#34;</span><span class="err">projects/</span><span class="p">[</span><span class="err">PROJECT_NAME</span><span class="p">]</span><span class="err">/zones/</span><span class="p">[</span><span class="err">ZONE_NAME</span><span class="p">]</span><span class="err">/instances/dev</span><span class="mi">1</span><span class="s2">&#34;))||(resource.type==&#34;</span><span class="err">compute.disks</span><span class="s2">&#34;&amp;&amp;resource.name.startsWith(&#34;</span><span class="err">projects/</span><span class="p">[</span><span class="err">PROJECT_NAME</span><span class="p">]</span><span class="err">/zones/</span><span class="p">[</span><span class="err">ZONE_NAME</span><span class="p">]</span><span class="err">/disks/dev</span><span class="mi">1</span><span class="s2">&#34;))&#34;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="err">}</span>
  <span class="err">}</span></code></pre></div>
<p>もうちょっと細かく権限管理したいなぁと思うことはあったけど、あんまり多用はしたくないですね 😅</p>

  </div>
</article>

      </div>
    </div>

    <div id="navigation-container">
      <div class="container">

<div id="footer-navigation">
  <div id="next-prev">
    <div><a href="https://blog.nownabe.com/2018/11/07/1434.html/">&lt; Ubuntuでapt-get updateができなくなった</a></div>
    <div><a href="https://blog.nownabe.com/2018/11/29/1443.html/">Beautiful Soup 4でうまくパースできなかった &gt;</a></div>
  </div>
  <div id="related-articles"><h2>See Also</h2>
    <ul><li><a href="/2018/12/18/1447.html/">GCP updates | December 17, 2018</a></li><li><a href="/2018/11/29/1444.html/">GCP updates  | November 26, 2018</a></li><li><a href="/2018/11/28/1432.html/">GCP updates  | October 29, 2018</a></li><li><a href="/2018/10/30/1431.html/">GCP updates  | October 15, 2018</a></li><li><a href="/2018/10/03/1416.html/">GCP updates  | October 1, 2018</a></li></ul></div>
  <div id="sns-buttons">
    <ul>
      <li>
        <div class="twitter-button">
          <a class="twitter-share-button" href="https://twitter.com/share" data-via="nownabe" data-related="nownabe">Tweet</a>
        </div>
      </li>
      <li>
        <div class="fb-like" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>
      </li>
      <li>
        <a class="hatena-bookmark-button" href="http://b.hatena.ne.jp/entry/" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加">
          <img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;">
        </a>
      </li>
      <li>
        <a class="pocket-btn" data-pocket-label="pocket" data-pocket-count="horizontal" data-lang="en"></a>
      </li>
    </ul>
  </div>
</div>

      </div>
    </div><div id="footer-container">
  <footer class="container">
    <p class="copyright">
      Copyright &copy; 2016 nownabe All Right Reserved.
    </p>
  </footer>
  <aside id="information" class="container">
    <ul id="links">
      <li>
        <a href="https://nownabe.github.io/">
          <img src="/img/nownabe.svg" alt="nownabe.github.io">
        </a>
      </li>
      <li>
        <a href="https://github.com/nownabe">
          <img src="/img/github.svg" alt="GitHub">
        </a>
      </li>
      <li>
        <a href="https://qiita.com/nownabe">
          <img src="/img/qiita.svg" alt="Qiita">
        </a>
      </li>
      <li>
        <a href="https://twitter.com/nownabe">
          <img src="/img/twitter.svg" alt="Twitter">
        </a>
      </li>
      <li>
        <a href="https://www.facebook.com/nownabe">
          <img src="/img/facebook.png" alt="Facebook">
        </a>
      </li>
    </ul>
  </aside>
</div>
<div id="fb-root"></div>
  </div>
  <script>
    
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');

    
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7&appId=1775541316016693";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    
    !function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");

  </script>
  <script src="https://b.st-hatena.com/js/bookmark_button.js" async="async"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      anchors.add(".body h1, .body h2, .body h3");
    });
  </script>
</body>
</html>
